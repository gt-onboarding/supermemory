---
title: "Intégration du SDK d’IA"
description: "Exemples complets montrant comment utiliser Supermemory avec Vercel AI SDK pour créer des applications intelligentes"
---

Cette page propose des exemples complets d’utilisation de Supermemory avec Vercel AI SDK, couvrant à la fois les approches Memory Tools et Infinite Chat.

<div id="personal-assistant-with-memory-tools">
  ## Assistant personnel avec Memory Tools
</div>

Créez un assistant IA qui retient les préférences des utilisateurs et leurs interactions passées :

<CodeGroup>
  ```typescript Next.js API Route
  import { streamText } from 'ai'
  import { createAnthropic } from '@ai-sdk/anthropic'
  import { supermemoryTools } from '@supermemory/tools/ai-sdk'

  const anthropic = createAnthropic({
    apiKey: process.env.ANTHROPIC_API_KEY!
  })

  export async function POST(request: Request) {
    const { messages } = await request.json()

    const result = await streamText({
      model: anthropic('claude-3-sonnet-20240229'),
      messages,
      tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!),
      system: `You are a helpful personal assistant. When users share information about themselves,
      remember it using the addMemory tool. When they ask questions, search your memories to provide
      personalized responses. Always be proactive about remembering important details.`
    })

    return result.toAIStreamResponse()
  }
  ```

  ```typescript Client Component
  'use client'

  import { useChat } from 'ai/react'

  export default function PersonalAssistant() {
    const { messages, input, handleInputChange, handleSubmit } = useChat()

    return (
      <div className="flex flex-col h-screen max-w-2xl mx-auto p-4">
        <div className="flex-1 overflow-y-auto space-y-4">
          {messages.map((message) => (
            <div
              key={message.id}
              className={`p-4 rounded-lg ${
                message.role === 'user' ? 'bg-blue-100 ml-auto' : 'bg-gray-100'
              }`}
            >
              <p>{message.content}</p>
            </div>
          ))}
        </div>

        <form onSubmit={handleSubmit} className="mt-4">
          <input
            value={input}
            onChange={handleInputChange}
            placeholder="Parlez-moi de vous ou posez-moi une question…"
            className="w-full p-2 border rounded"
          />
        </form>
      </div>
    )
  }
  ```
</CodeGroup>

**Exemple de conversation :**

* Utilisateur : « Je suis allergique aux cacahuètes et j’adore la cuisine italienne »
* IA : *Utilise l’outil addMemory* « J’ai retenu que vous êtes allergique aux cacahuètes et que vous adorez la cuisine italienne ! »
* Utilisateur : « Suggère un restaurant pour ce soir »
* IA : *Utilise l’outil searchMemories* « D’après ce que je sais de vous, je recommanderais un restaurant italien sans cacahuètes… »

<div id="customer-support-with-context">
  ## Support client contextuel
</div>

Créez un système d’assistance client qui conserve l’historique de chaque client :

```typescript
import { streamText } from 'ai'
import { createOpenAI } from '@ai-sdk/openai'
import { supermemoryTools } from '@supermemory/tools/ai-sdk'

const openai = createOpenAI({
  apiKey: process.env.OPENAI_API_KEY!
})

export async function POST(request: Request) {
  const { messages, customerId } = await request.json()

  const result = await streamText({
    model: openai('gpt-5'),
    messages,
    tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
      containerTags: [customerId]
    }),
    system: `Vous êtes un agent de support client. Avant de répondre à toute demande :
    1. Recherchez les interactions et problèmes antérieurs du client
    2. Retenez toute nouvelle information partagée dans cette conversation
    3. Fournissez une aide personnalisée basée sur son historique
    4. Soyez toujours empathique et orienté solutions`
  })

  return result.toAIStreamResponse()
}
```

<div id="infinite-chat-for-documentation">
  ## Infinite Chat pour la documentation
</div>

Créez un assistant de documentation avec un contexte illimité :

<CodeGroup>
  ```typescript Documentation Chat
  import { streamText } from 'ai'

  const infiniteChat = createOpenAI({
    baseUrl: 'https://api.supermemory.ai/v3/https://api.openai.com/v1',
    apiKey: 'your-provider-api-key',
    headers: {
      'x-supermemory-api-key': 'supermemory-api-key',
      'x-sm-conversation-id': 'conversation-id'
    }
  })

  export async function POST(request: Request) {
    const { messages } = await request.json()

    const result = await streamText({
      model: infiniteChat('gpt-5'),
      messages,
      system: `You are a documentation assistant. You have access to all previous
      conversations and can reference earlier discussions. Help users understand
      the documentation by building on previous context.`
    })

    return result.toAIStreamResponse()
  }
  ```

  ```typescript Upload Documentation
  // Point de terminaison distinct pour importer la documentation dans la mémoire
  import { addMemory } from '@supermemory/tools'

  export async function POST(request: Request) {
    const { content, title, url } = await request.json()

    const memory = await addMemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!,
      content,
      title,
      url,
      headers: {
        'x-sm-conversation-id': 'documentation'
      }
    })

    return Response.json({ success: true, memory })
  }
  ```
</CodeGroup>

<div id="multi-user-learning-assistant">
  ## Assistant d’apprentissage multi-utilisateurs
</div>

Créez un assistant qui apprend de plusieurs utilisateurs tout en conservant des données distinctes :

```typescript
import { streamText } from 'ai'
import { createAnthropic } from '@ai-sdk/anthropic'
import { supermemoryTools } from '@supermemory/tools/ai-sdk'

const anthropic = createAnthropic({
  apiKey: process.env.ANTHROPIC_API_KEY!
})

export async function POST(request: Request) {
  const { messages, userId, courseId } = await request.json()

  const result = await streamText({
    model: anthropic('claude-3-haiku-20240307'),
    messages,
    tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
      containerTags: [userId]
    }),
    system: `Vous êtes un assistant pédagogique. Aidez les étudiants dans leurs études en :
    1. Retenant leurs progrès d'apprentissage et leurs difficultés
    2. Recherchant les informations pertinentes de leurs sessions précédentes
    3. Fournissant des explications personnalisées selon leur style d'apprentissage
    4. Suivant les sujets qu'ils maîtrisent par rapport à ceux nécessitant plus d'aide`
  })

  return result.toAIStreamResponse()
}
```

<div id="research-assistant-with-file-processing">
  ## Assistant de recherche avec traitement de fichiers
</div>

Combinez le téléversement de fichiers avec les outils de memory pour l’assistance à la recherche :

<CodeGroup>
  ```typescript API Route
  import { streamText } from 'ai'
  import { createOpenAI } from '@ai-sdk/openai'
  import { supermemoryTools } from '@supermemory/tools/ai-sdk'

  const openai = createOpenAI({
    apiKey: process.env.OPENAI_API_KEY!
  })

  export async function POST(request: Request) {
    const { messages, projectId } = await request.json()

    const result = await streamText({
      model: openai('gpt-5'),
      messages,
      tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
        containerTags: [projectId]
      }),
      system: `You are a research assistant. You can:
      1. Search through uploaded research papers and documents
      2. Remember key findings and insights from conversations
      3. Help synthesize information across multiple sources
      4. Track research progress and important discoveries`
    })

    return result.toAIStreamResponse()
  }
  ```

  ```typescript File Upload Handler
  import { addMemory } from '@supermemory/tools'

  export async function POST(request: Request) {
    const formData = await request.formData()
    const file = formData.get('file') as File
    const projectId = formData.get('projectId') as string

    // Téléverser le fichier et l’ajouter à la memory
    const memory = await addMemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!,
      content: file, // Supermemory gère le traitement des fichiers
      title: file.name,
      headers: {
        'x-sm-conversation-id': projectId
      }
    })

    return Response.json({
      success: true,
      message: "Document téléversé et traité pour la recherche",
      memoryId: memory.id
    })
  }
  ```
</CodeGroup>

<div id="code-assistant-with-project-memory">
  ## Assistant de code avec memory de projet
</div>

Créez un assistant de développement qui se souvient de votre codebase et de vos préférences :

```typescript
import { streamText } from 'ai'
import { createAnthropic } from '@ai-sdk/anthropic'
import {
  supermemoryTools,
  searchMemoriesTool,
  addMemoryTool
} from '@supermemory/tools/ai-sdk'

const anthropic = createAnthropic({
  apiKey: process.env.ANTHROPIC_API_KEY!
})

export async function POST(request: Request) {
  const { messages, repositoryId } = await request.json()

  const result = await streamText({
    model: anthropic('claude-3-sonnet-20240229'),
    messages,
    tools: {
      // Utiliser des outils individuels pour plus de contrôle
      searchMemories: searchMemoriesTool(process.env.SUPERMEMORY_API_KEY!, {
        headers: {
        }
      }),
      addMemory: addMemoryTool(process.env.SUPERMEMORY_API_KEY!, {
        headers: {
        }
      }),
      // Ajouter des outils personnalisés
      executeCode: {
        description: 'Exécuter du code dans un environnement sandbox',
        parameters: z.object({
          code: z.string(),
          language: z.string()
        }),
        execute: async ({ code, language }) => {
          // Votre logique d'exécution de code
          return { result: "Code exécuté avec succès" }
        }
      }
    },
    system: `Vous êtes un assistant de programmation avec mémoire. Vous pouvez :
    1. Mémoriser les modèles de programmation et préférences des conversations passées
    2. Rechercher dans les exemples de code et solutions précédents
    3. Suivre l'architecture du projet et les décisions de conception
    4. Apprendre des sessions de débogage et des problèmes courants`
  })

  return result.toAIStreamResponse()
}
```

<div id="advanced-custom-tool-integration">
  ## Avancé : intégration d’outils personnalisés
</div>

Combinez les outils Supermemory avec vos propres outils personnalisés :

```typescript
import { streamText } from 'ai'
import { createOpenAI } from '@ai-sdk/openai'
import { supermemoryTools } from '@supermemory/tools/ai-sdk'
import { z } from 'zod'

const openai = createOpenAI({
  apiKey: process.env.OPENAI_API_KEY!
})

// Outil personnalisé pour l'intégration de calendrier
const calendarTool = {
  description: 'Créer des événements de calendrier',
  parameters: z.object({
    title: z.string(),
    date: z.string(),
    duration: z.number()
  }),
  execute: async ({ title, date, duration }) => {
    // Votre intégration API de calendrier
    return { eventId: "cal_123", message: "Événement créé" }
  }
}

export async function POST(request: Request) {
  const { messages } = await request.json()

  const result = await streamText({
    model: openai('gpt-5'),
    messages,
    tools: {
      // Intégrer les outils Supermemory
      ...supermemoryTools(process.env.SUPERMEMORY_API_KEY!),
      // Ajouter des outils personnalisés
      createEvent: calendarTool,
    },
    system: `Vous êtes un assistant personnel qui peut mémoriser des informations et
    gérer des calendriers. Lorsque les utilisateurs mentionnent des événements ou des rendez-vous :
    1. Mémoriser les détails en utilisant addMemory
    2. Créer des événements de calendrier en utilisant createEvent
    3. Rechercher des conflits en utilisant searchMemories`
  })

  return result.toAIStreamResponse()
}
```

<div id="environment-setup">
  ## Configuration de l’environnement
</div>

Pour tous les exemples, assurez-vous de définir les variables d’environnement suivantes :

```bash .env.local
SUPERMEMORY_API_KEY=your_supermemory_key
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key
```

<div id="best-practices">
  ## Bonnes pratiques
</div>

<div id="memory-tools">
  ### Memory Tools
</div>

* Rédigez un contenu de memory descriptif pour améliorer les résultats de recherche
* Ajoutez, dans vos invites système, le contexte précisant quand utiliser chaque outil
* Utilisez des en-têtes de projet pour séparer les différents cas d’usage
* Implémentez une gestion des erreurs en cas d’échec des outils

<div id="infinite-chat">
  ### Infinite Chat
</div>

* Utilisez des identifiants de conversation pour maintenir des contextes de chat séparés
* Incluez des identifiants utilisateur pour des expériences personnalisées
* Testez différents providers pour trouver le meilleur choix pour votre cas d’usage
* Surveillez l’utilisation des jetons pour optimiser les coûts

<div id="general-tips">
  ### Conseils généraux
</div>

* Commencez par des exemples simples et augmentez progressivement la complexité
* Utilisez la recherche pour éviter les memories en double
* Mettez en place une authentification robuste pour l’environnement de production
* Prévoyez un mécanisme de rate limiting pour les applications à fort volume

<div id="next-steps">
  ## Prochaines étapes
</div>

<CardGroup cols={2}>
  <Card title="Memory API" icon="database" href="/fr/memory-api/overview">
    Gestion avancée des memories avec contrôle complet via l’API
  </Card>

  <Card title="Memory Router" icon="route" href="/fr/memory-router/overview">
    Proxy prêt à l’emploi pour les applications LLM existantes
  </Card>
</CardGroup>