---
title: "Filtrage des memories"
description: "Filtrer les memories par balises de conteneur et Metadata à l’aide d’un filtrage basé sur SQL"
---

Filtrez les memories à l’aide de balises de conteneur et de Metadata. Le système de filtrage repose sur la construction de requêtes SQL ; vous devez donc structurer vos filters comme des requêtes de base de données.

<div id="filter-by-container-tags">
  ## Filtrer par tags de conteneur
</div>

Les tags de conteneur utilisent une correspondance de tableau exacte — les memories doivent avoir exactement les mêmes tags dans le même ordre.

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Tag unique — correspond aux memories ayant exactement ["user_123"]
    const userMemories = await client.memories.list({
      containerTags: ["user_123"]
    });

    // Tags multiples — correspond aux memories ayant exactement ["user_123", "project_ai"]
    const projectMemories = await client.memories.list({
      containerTags: ["user_123", "project_ai"]
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Tag unique
    user_memories = client.memories.list(container_tags=["user_123"])

    # Tags multiples (correspondance exacte)
    project_memories = client.memories.list(
        container_tags=["user_123", "project_ai"]
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    # Tag unique
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{"containerTags": ["user_123"]}'

    # Tags multiples
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{"containerTags": ["user_123", "project_ai"]}'
    ```
  </Tab>
</Tabs>

<div id="metadata-filtering-with-sql-logic">
  ## Filtrage de Metadata avec une logique SQL
</div>

Le paramètre `filters` permet de filtrer sur des champs de Metadata à l’aide de structures de requêtes de type SQL. Comme nous utilisons une construction de requêtes SQL côté backend, vous devez structurer vos `filters` comme des requêtes de base de données avec une logique explicite AND/OR.

<div id="why-this-structure">
  ### Pourquoi cette structure ?
</div>

Dans les bases de données SQL, `AND` a une précédence plus élevée que `OR`. Sans regroupement explicite, une requête comme :

```
category = 'programming' OR framework = 'react' AND difficulty = 'advanced'
```

Est interprétée comme :

```
category = 'programming' OR (framework = 'react' AND difficulty = 'advanced')
```

La structure JSON impose un regroupement explicite pour éviter des résultats inattendus.

<Info>
  **Règles de structure des filtres :**

  * Encapsulez toujours les conditions dans des tableaux `AND` ou `OR` (même pour une seule condition)
  * Utilisez `JSON.stringify()` pour convertir l’objet de filtre en chaîne
  * Chaque condition doit inclure les propriétés `key`, `value` et `negate`
  * `negate: false` pour une correspondance normale, `negate: true` pour l’exclusion
</Info>


<div id="simple-metadata-filter">
  ### Filtre de Metadata simple
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Filtrer selon un seul champ de Metadata
    const programmingMemories = await client.memories.list({
      filters: JSON.stringify({
        AND: [
          { key: "category", value: "programming", negate: false }
        ]
      })
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import json

    # Filtrer selon un seul champ de Metadata
    programming_memories = client.memories.list(
        filters=json.dumps({
            "AND": [
                {"key": "category", "value": "programming", "negate": False}
            ]
        })
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"AND\":[{\"key\":\"category\",\"value\":\"programming\",\"negate\":false}]}"
      }'
    ```
  </Tab>
</Tabs>

<div id="multiple-conditions-and-logic">
  ### Conditions multiples (logique AND)
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Toutes les conditions doivent être satisfaites
    const reactTutorials = await client.memories.list({
      filters: JSON.stringify({
        AND: [
          { key: "category", value: "tutorial", negate: false },
          { key: "framework", value: "react", negate: false },
          { key: "difficulty", value: "beginner", negate: false }
        ]
      })
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Toutes les conditions doivent être satisfaites
    react_tutorials = client.memories.list(
        filters=json.dumps({
            "AND": [
                {"key": "category", "value": "tutorial", "negate": False},
                {"key": "framework", "value": "react", "negate": False},
                {"key": "difficulty", "value": "beginner", "negate": False}
            ]
        })
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"AND\":[{\"key\":\"category\",\"value\":\"tutorial\",\"negate\":false},{\"key\":\"framework\",\"value\":\"react\",\"negate\":false}]}"
      }'
    ```
  </Tab>
</Tabs>

<div id="alternative-conditions-or-logic">
  ### Conditions alternatives (logique OR)
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // N'importe quelle condition peut s'appliquer
    const frontendMemories = await client.memories.list({
      filters: JSON.stringify({
        OR: [
          { key: "framework", value: "react", negate: false },
          { key: "framework", value: "vue", negate: false },
          { key: "framework", value: "angular", negate: false }
        ]
      })
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # N'importe quelle condition peut s'appliquer
    frontend_memories = client.memories.list(
        filters=json.dumps({
            "OR": [
                {"key": "framework", "value": "react", "negate": False},
                {"key": "framework", "value": "vue", "negate": False},
                {"key": "framework", "value": "angular", "negate": False}
            ]
        })
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"OR\":[{\"key\":\"framework\",\"value\":\"react\",\"negate\":false},{\"key\":\"framework\",\"value\":\"vue\",\"negate\":false}]}"
      }'
    ```
  </Tab>
</Tabs>

<div id="complex-nested-logic">
  ### Logique imbriquée complexe
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Logique complexe : programming AND (react OR advanced difficulty)
    const advancedContent = await client.memories.list({
      filters: JSON.stringify({
        AND: [
          { key: "category", value: "programming", negate: false },
          {
            OR: [
              { key: "framework", value: "react", negate: false },
              { key: "difficulty", value: "advanced", negate: false }
            ]
          }
        ]
      })
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Logique complexe : programming AND (react OR advanced difficulty)
    advanced_content = client.memories.list(
        filters=json.dumps({
            "AND": [
                {"key": "category", "value": "programming", "negate": False},
                {
                    "OR": [
                        {"key": "framework", "value": "react", "negate": False},
                        {"key": "difficulty", "value": "advanced", "negate": False}
                    ]
                }
            ]
        })
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"AND\":[{\"key\":\"category\",\"value\":\"programming\",\"negate\":false},{\"OR\":[{\"key\":\"framework\",\"value\":\"react\",\"negate\":false},{\"key\":\"difficulty\",\"value\":\"advanced\",\"negate\":false}]}]}"
      }'
    ```
  </Tab>
</Tabs>

<div id="array-contains-filtering">
  ## Filtrage « Array Contains »
</div>

Filtrez les memories qui contiennent des valeurs spécifiques dans des champs de type tableau, comme les participants, les tags ou les membres de l’équipe.

<div id="basic-array-contains">
  ### Contenance d’un élément (basique)
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Rechercher les memories où john.doe a participé
    const meetingMemories = await client.memories.list({
      filters: JSON.stringify({
        AND: [
          {
            key: "participants",
            value: "john.doe",
            filterType: "array_contains",
            negate: false
          }
        ]
      })
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Rechercher les memories où john.doe a participé
    meeting_memories = client.memories.list(
        filters=json.dumps({
            "AND": [
                {
                    "key": "participants",
                    "value": "john.doe",
                    "filterType": "array_contains",
                    "negate": False
                }
            ]
        })
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"AND\":[{\"key\":\"participants\",\"value\":\"john.doe\",\"filterType\":\"array_contains\",\"negate\":false}]}"
      }'
    ```
  </Tab>
</Tabs>

<div id="array-contains-with-exclusion">
  ### array_contains avec exclusion
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Rechercher des memories qui n’incluent pas un membre d’équipe spécifique
    const filteredMemories = await client.memories.list({
      filters: JSON.stringify({
        AND: [
          {
            key: "reviewers",
            value: "external.consultant",
            filterType: "array_contains",
            negate: true  // Exclure les memories avec des consultants externes
          },
          {
            key: "project_tags",
            value: "internal-only",
            filterType: "array_contains",
            negate: false
          }
        ]
      })
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Rechercher des memories qui n’incluent pas un membre d’équipe spécifique
    filtered_memories = client.memories.list(
        filters=json.dumps({
            "AND": [
                {
                    "key": "reviewers",
                    "value": "external.consultant",
                    "filterType": "array_contains",
                    "negate": True  # Exclure les memories avec des consultants externes
                },
                {
                    "key": "project_tags",
                    "value": "internal-only",
                    "filterType": "array_contains",
                    "negate": False
                }
            ]
        })
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"AND\":[{\"key\":\"reviewers\",\"value\":\"external.consultant\",\"filterType\":\"array_contains\",\"negate\":true},{\"key\":\"project_tags\",\"value\":\"internal-only\",\"filterType\":\"array_contains\",\"negate\":false}]}"
      }'
    ```
  </Tab>
</Tabs>

<div id="multiple-array-contains-or-logic">
  ### Plusieurs éléments présents dans un tableau (logique OR)
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Rechercher des memories impliquant l’un des responsables d’équipe
    const leadershipMemories = await client.memories.list({
      filters: JSON.stringify({
        OR: [
          {
            key: "attendees",
            value: "engineering.lead",
            filterType: "array_contains"
          },
          {
            key: "attendees",
            value: "product.lead",
            filterType: "array_contains"
          },
          {
            key: "attendees",
            value: "design.lead",
            filterType: "array_contains"
          }
        ]
      }),
      sort: "updatedAt",
      order: "desc"
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Rechercher des memories impliquant l’un des responsables d’équipe
    leadership_memories = client.memories.list(
        filters=json.dumps({
            "OR": [
                {
                    "key": "attendees",
                    "value": "engineering.lead",
                    "filterType": "array_contains"
                },
                {
                    "key": "attendees",
                    "value": "product.lead",
                    "filterType": "array_contains"
                },
                {
                    "key": "attendees",
                    "value": "design.lead",
                    "filterType": "array_contains"
                }
            ]
        }),
        sort="updatedAt",
        order="desc"
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "filters": "{\"OR\":[{\"key\":\"attendees\",\"value\":\"engineering.lead\",\"filterType\":\"array_contains\"},{\"key\":\"attendees\",\"value\":\"product.lead\",\"filterType\":\"array_contains\"},{\"key\":\"attendees\",\"value\":\"design.lead\",\"filterType\":\"array_contains\"}]}",
        "sort": "updatedAt",
        "order": "desc"
      }'
    ```
  </Tab>
</Tabs>

<div id="combined-container-tags-metadata-filtering">
  ## Combinaison des étiquettes de conteneur et du filtrage par metadata
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const filteredMemories = await client.memories.list({
      containerTags: ["user_123"],
      filters: JSON.stringify({
        AND: [
          { key: "category", value: "tutorial", negate: false },
          { key: "framework", value: "react", negate: false }
        ]
      }),
      sort: "updatedAt",
      order: "desc",
      limit: 50
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    filtered_memories = client.memories.list(
        container_tags=["user_123"],
        filters=json.dumps({
            "AND": [
                {"key": "category", "value": "tutorial", "negate": False},
                {"key": "framework", "value": "react", "negate": False}
            ]
        }),
        sort="updatedAt",
        order="desc",
        limit=50
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/documents/list" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "containerTags": ["user_123"],
        "filters": "{\"AND\":[{\"key\":\"category\",\"value\":\"tutorial\",\"negate\":false},{\"key\":\"framework\",\"value\":\"react\",\"negate\":false}]}",
        "sort": "updatedAt",
        "order": "desc",
        "limit": 50
      }'
    ```
  </Tab>
</Tabs>

<Warning>
**Erreurs courantes :**
- Utiliser des objets de condition seuls : `{"key": "category", "value": "programming"}`
- Oublier JSON.stringify : passer des objets au lieu de chaînes
- Propriété negate manquante : incluez toujours `"negate": false` ou `"negate": true`
</Warning>

<Note>
**Étiquettes de conteneur vs filtrage par metadata :**
- Étiquettes de conteneur : correspondance exacte de tableaux pour le regroupement organisationnel
- Filtres de metadata : requêtes de type SQL sur des champs de metadata personnalisés avec logique complexe
- Les deux peuvent être combinés pour un filtrage puissant
</Note>