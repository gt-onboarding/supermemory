---
title: "Notion è¿æ¥å™¨"
description: "é€šè¿‡å®æ—¶ webhook ä¸å·¥ä½œåŒºé›†æˆï¼ŒåŒæ­¥ Notion é¡µé¢ã€æ•°æ®åº“å’Œå—"
icon: "notion"
---

å°† Notion å·¥ä½œåŒºè¿æ¥åˆ°ä½ çš„ Supermemory çŸ¥è¯†åº“ï¼Œè‡ªåŠ¨åŒæ­¥é¡µé¢ã€æ•°æ®åº“å’Œå†…å®¹å—ã€‚æ”¯æŒå®æ—¶æ›´æ–°ã€ä¸°å¯Œæ ¼å¼ä¸æ•°æ®åº“å±æ€§ã€‚

<div id="quick-setup">
  ## å¿«é€Ÿå¼€å§‹
</div>

<div id="1-create-notion-connection">
  ### 1. åˆ›å»º Notion é“¾æ¥è´¦æˆ·
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    import Supermemory from 'supermemory';

    const client = new Supermemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!
    });

    const connection = await client.connections.create('notion', {
      redirectUrl: 'https://yourapp.com/auth/notion/callback',
      containerTags: ['user-123', 'notion-workspace'],
      documentLimit: 2000,
      metadata: {
        source: 'notion',
        workspaceType: 'team',
        department: 'product'
      }
    });

    // å°†ç”¨æˆ·é‡å®šå‘åˆ° Notion çš„ OAuthï¼ˆå¼€æ”¾æˆæƒåè®®ï¼‰
    window.location.href = connection.authLink;
    ```
  </Tab>
  <Tab title="Python">
    ```python
    from supermemory import Supermemory
    import os

    client = Supermemory(api_key=os.environ.get("SUPERMEMORY_API_KEY"))

    connection = client.connections.create(
        'notion',
        redirect_url='https://yourapp.com/auth/notion/callback',
        container_tags=['user-123', 'notion-workspace'],
        document_limit=2000,
        metadata={
            'source': 'notion',
            'workspaceType': 'team',
            'department': 'product'
        }
    )

    # å°†ç”¨æˆ·é‡å®šå‘åˆ° Notion çš„ OAuthï¼ˆå¼€æ”¾æˆæƒåè®®ï¼‰
    print(f'Redirect to: {connection.auth_link}')
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v3/connections/notion" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "redirectUrl": "https://yourapp.com/auth/notion/callback",
        "containerTags": ["user-123", "notion-workspace"],
        "documentLimit": 2000,
        "metadata": {
          "source": "notion",
          "workspaceType": "team",
          "department": "product"
        }
      }'
    ```
  </Tab>
</Tabs>

<div id="2-handle-oauth-flow">
  ### 2. å¤„ç† OAuthï¼ˆå¼€æ”¾æˆæƒåè®®ï¼‰æµç¨‹
</div>

ç”¨æˆ·æˆäºˆå·¥ä½œåŒºè®¿é—®æƒé™åï¼ŒNotion ä¼šé‡å®šå‘åˆ°ä½ çš„å›è°ƒ urlã€‚é“¾æ¥è´¦æˆ·ä¼šè‡ªåŠ¨å»ºç«‹ã€‚

<div id="3-monitor-sync-progress">
  ### 3. ç›‘æ§åŒæ­¥è¿›åº¦
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // æ£€æŸ¥é“¾æ¥è´¦æˆ·è¯¦æƒ…
    const connection = await client.connections.getByTags('notion', {
      containerTags: ['user-123', 'notion-workspace']
    });

    console.log('å·²è¿æ¥çš„å·¥ä½œåŒºï¼š', connection.email);
    console.log('é“¾æ¥è´¦æˆ·åˆ›å»ºæ—¶é—´ï¼š', connection.createdAt);

    // åˆ—å‡ºå·²åŒæ­¥çš„é¡µé¢ä¸æ•°æ®åº“
    const documents = await client.connections.listDocuments('notion', {
      containerTags: ['user-123', 'notion-workspace']
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # æ£€æŸ¥é“¾æ¥è´¦æˆ·è¯¦æƒ…
    connection = client.connections.get_by_tags(
        'notion',
        container_tags=['user-123', 'notion-workspace']
    )

    print(f'å·²è¿æ¥çš„å·¥ä½œåŒºï¼š{connection.email}')
    print(f'é“¾æ¥è´¦æˆ·åˆ›å»ºæ—¶é—´ï¼š{connection.created_at}')

    # åˆ—å‡ºå·²åŒæ­¥çš„é¡µé¢ä¸æ•°æ®åº“
    documents = client.connections.list_documents(
        'notion',
        container_tags=['user-123', 'notion-workspace']
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    # æŒ‰ provider ä¸æ ‡ç­¾è·å–é“¾æ¥è´¦æˆ·è¯¦æƒ…
    curl -X POST "https://api.supermemory.ai/v3/connections/notion/connection" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{"containerTags": ["user-123", "notion-workspace"]}'

    # å“åº”åŒ…å«é“¾æ¥è´¦æˆ·è¯¦æƒ…ï¼š
    # {
    #   "id": "conn_abc123",
    #   "provider": "notion",
    #   "email": "workspace@example.com",
    #   "createdAt": "2024-01-15T10:00:00Z",
    #   "documentLimit": 2000,
    #   "metadata": {...}
    # }

    # åˆ—å‡ºå·²åŒæ­¥çš„ Documents
    curl -X POST "https://api.supermemory.ai/v3/connections/notion/documents" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: "application/json" \
      -d '{"containerTags": ["user-123", "notion-workspace"]}'

    # å“åº”ï¼šåŒ…å«åŒæ­¥çŠ¶æ€çš„æ–‡æ¡£å¯¹è±¡æ•°ç»„
    # [
    #   {"title": "Product Roadmap", "type": "notion_database", "status": "done"},
    #   {"title": "Meeting Notes", "type": "notion_page", "status": "done"}
    # ]
    ```
  </Tab>
</Tabs>

<div id="supported-content-types">
  ## æ”¯æŒçš„å†…å®¹ç±»å‹
</div>

<div id="notion-pages">
  ### Notion é¡µé¢
</div>

- **å¯Œæ–‡æœ¬å—**ï¼Œä¿ç•™æ ¼å¼
- **åµŒå¥—é¡µé¢**ä¸å±‚çº§ç»“æ„
- **åµŒå…¥å†…å®¹**ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€æ–‡ä»¶ï¼‰
- **ä»£ç å—**ï¼Œæ”¯æŒè¯­æ³•é«˜äº®
- **æ ‡æ³¨ä¸å¼•ç”¨**è½¬æ¢ä¸º Markdown

<div id="notion-databases">
  ### Notion æ•°æ®åº“
</div>

- å°†**æ•°æ®åº“æ¡ç›®**åŒæ­¥ä¸ºç‹¬ç«‹çš„ Documents
- **å±æ€§**åŒ…å«åœ¨ Metadata ä¸­
- **æ•°æ®åº“æ¡ç›®ä¹‹é—´çš„å…³è”å…³ç³»**
- **å…¬å¼ä¸æ±‡æ€»**çš„è®¡ç®—ç»“æœ
- **å¤šé€‰ä¸å•é€‰**ç±»å‹çš„å±æ€§

<div id="block-types">
  ### åŒºå—ç±»å‹
</div>

| åŒºå—ç±»å‹ | å¤„ç†æ–¹å¼ | Markdown è¾“å‡º |
|------------|------------|-----------------|
| **æ–‡æœ¬** | ä¿ç•™æ ¼å¼ | `**bold**`, `*italic*`, `~~strikethrough~~` |
| **æ ‡é¢˜** | ä¿æŒå±‚çº§ | `# H1`, `## H2`, `### H3` |
| **ä»£ç ** | è¯­è¨€è¯†åˆ« | ````python\ncode here\n```` |
| **å¼•ç”¨** | å¼•ç”¨å—æ ¼å¼ | `> quoted text` |
| **æç¤ºæ¡†** | è‡ªå®šä¹‰æ ¼å¼ | `> ğŸ’¡ **Note:** callout text` |
| **åˆ—è¡¨** | ä¿ç•™ç»“æ„ | `- item 1\n  - nested item` |
| **è¡¨æ ¼** | Markdown è¡¨æ ¼ | `| Col 1 | Col 2 |\n|-------|-------|` |
| **å›¾ç‰‡** | é€šè¿‡ Metadata å¼•ç”¨ | `![alt text](url)` |
| **åµŒå…¥** | å¸¦ä¸Šä¸‹æ–‡çš„é“¾æ¥ | `[Embedded Content](url)` |

<div id="delete-connection">
  ## åˆ é™¤é“¾æ¥è´¦æˆ·
</div>

åœ¨ä¸å†éœ€è¦æ—¶ç§»é™¤ Notion é“¾æ¥è´¦æˆ·ï¼š

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // é€šè¿‡è¿æ¥ ID åˆ é™¤
    const result = await client.connections.delete('connection_id_123');
    console.log('Deleted connection:', result.id);

    // é€šè¿‡ provider ä¸ container tags åˆ é™¤
    const providerResult = await client.connections.deleteByProvider('notion', {
      containerTags: ['user-123']
    });
    console.log('Deleted Notion connection for user');
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # é€šè¿‡è¿æ¥ ID åˆ é™¤
    result = client.connections.delete('connection_id_123')
    print(f'Deleted connection: {result.id}')

    # é€šè¿‡ provider ä¸ container tags åˆ é™¤
    provider_result = client.connections.delete_by_provider(
        'notion',
        container_tags=['user-123']
    )
    print('Deleted Notion connection for user')
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    # é€šè¿‡è¿æ¥ ID åˆ é™¤
    curl -X DELETE "https://api.supermemory.ai/v3/connections/connection_id_123" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY"

    # é€šè¿‡ provider ä¸ container tags åˆ é™¤
    curl -X DELETE "https://api.supermemory.ai/v3/connections/notion" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{"containerTags": ["user-123"]}'
    ```
  </Tab>
</Tabs>

<Note>
åˆ é™¤é“¾æ¥è´¦æˆ·å°†ï¼š
- åœæ­¢æ¥è‡ª Notion çš„æ‰€æœ‰åç»­åŒæ­¥
- ç§»é™¤ OAuthï¼ˆå¼€æ”¾æˆæƒåè®®ï¼‰æˆæƒ
- åœ¨ Supermemory ä¸­ä¿ç•™å·²åŒæ­¥çš„ Documentsï¼ˆä¸ä¼šè¢«åˆ é™¤ï¼‰
</Note>

<div id="advanced-configuration">
  ## é«˜çº§é…ç½®
</div>

<div id="custom-notion-integration">
  ### è‡ªå®šä¹‰ Notion é›†æˆ
</div>

åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¸­ï¼Œè¯·åˆ›å»ºä½ è‡ªå·±çš„ Notion é›†æˆï¼š

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // é¦–å…ˆï¼Œä½¿ç”¨ä½ çš„ Notion åº”ç”¨å‡­æ®æ›´æ–°ç»„ç»‡è®¾ç½®
    await client.settings.update({
      notionCustomKeyEnabled: true,
      notionClientId: 'your-notion-client-id',
      notionClientSecret: 'your-notion-client-secret'
    });

    // ç„¶åä½¿ç”¨ä½ çš„è‡ªå®šä¹‰é›†æˆåˆ›å»ºé“¾æ¥è´¦æˆ·
    const connection = await client.connections.create('notion', {
      redirectUrl: 'https://yourapp.com/callback',
      containerTags: ['org-456', 'user-789'],
      metadata: { customIntegration: true }
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # é¦–å…ˆï¼Œä½¿ç”¨ä½ çš„ Notion åº”ç”¨å‡­æ®æ›´æ–°ç»„ç»‡è®¾ç½®
    client.settings.update(
        notion_custom_key_enabled=True,
        notion_client_id='your-notion-client-id',
        notion_client_secret='your-notion-client-secret'
    )

    # ç„¶åä½¿ç”¨ä½ çš„è‡ªå®šä¹‰é›†æˆåˆ›å»ºé“¾æ¥è´¦æˆ·
    connection = client.connections.create(
        'notion',
        redirect_url='https://yourapp.com/callback',
        container_tags=['org-456', 'user-789'],
        metadata={'customIntegration': True}
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    # æ›´æ–°ç»„ç»‡è®¾ç½®
    curl -X PATCH "https://api.supermemory.ai/v3/settings" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "notionCustomKeyEnabled": true,
        "notionClientId": "your-notion-client-id",
        "notionClientSecret": "your-notion-client-secret"
      }'
    ```
  </Tab>
</Tabs>

<div id="content-filtering">
  ### å†…å®¹è¿‡æ»¤
</div>

æ§åˆ¶è¦åŒæ­¥çš„ Notion å†…å®¹ï¼š

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // ä¸º Notion å†…å®¹é…ç½®æ™ºèƒ½è¿‡æ»¤
    await client.settings.update({
      shouldLLMFilter: true,
      includeItems: {
        pageTypes: ['page', 'database'],
        titlePatterns: ['*Spec*', '*Documentation*', '*Meeting Notes*'],
        databases: ['Project Tracker', 'Knowledge Base', 'Team Wiki']
      },
      excludeItems: {
        titlePatterns: ['*Draft*', '*Personal*', '*Archive*'],
        databases: ['Personal Tasks', 'Scratchpad']
      },
      filterPrompt: "Sync professional documentation, project specs, meeting notes, and team knowledge. Skip personal notes, drafts, and archived content."
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # ä¸º Notion å†…å®¹é…ç½®æ™ºèƒ½è¿‡æ»¤
    client.settings.update(
        should_llm_filter=True,
        include_items={
            'pageTypes': ['page', 'database'],
            'titlePatterns': ['*Spec*', '*Documentation*', '*Meeting Notes*'],
            'databases': ['Project Tracker', 'Knowledge Base', 'Team Wiki']
        },
        exclude_items={
            'titlePatterns': ['*Draft*', '*Personal*', '*Archive*'],
            'databases': ['Personal Tasks', 'Scratchpad']
        },
        filter_prompt="Sync professional documentation, project specs, meeting notes, and team knowledge. Skip personal notes, drafts, and archived content."
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    # ä¸º Notion å†…å®¹é…ç½®æ™ºèƒ½è¿‡æ»¤
    curl -X PATCH "https://api.supermemory.ai/v3/settings" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "shouldLLMFilter": true,
        "includeItems": {
          "pageTypes": ["page", "database"],
          "titlePatterns": ["*Spec*", "*Documentation*", "*Meeting Notes*"],
          "databases": ["Project Tracker", "Knowledge Base", "Team Wiki"]
        },
        "excludeItems": {
          "titlePatterns": ["*Draft*", "*Personal*", "*Archive*"],
          "databases": ["Personal Tasks", "Scratchpad"]
        },
        "filterPrompt": "Sync professional documentation, project specs, meeting notes, and team knowledge. Skip personal notes, drafts, and archived content."
      }'

    # å“åº”ï¼š
    # {
    #   "success": true,
    #   "message": "Settings updated successfully"
    # }
    ```
  </Tab>
</Tabs>

<div id="workspace-permissions">
  ## å·¥ä½œåŒºæƒé™
</div>

Notion è¿æ¥å™¨éµå¾ªå·¥ä½œåŒºæƒé™ï¼š

| æƒé™çº§åˆ« | åŒæ­¥è¡Œä¸º |
|-----------------|---------------|
| **Admin** | è®¿é—®æ•´ä¸ªå·¥ä½œåŒº |
| **Member** | åŒæ­¥å…·å¤‡è¯»å–æƒé™çš„é¡µé¢ |
| **Guest** | ä»…åŒæ­¥å…±äº«é¡µé¢ |
| **No Access** | ä»ç´¢å¼•ä¸­ç§»é™¤ |

<div id="database-integration">
  ## æ•°æ®åº“é›†æˆ
</div>

<div id="database-properties">
  ### æ•°æ®åº“å±æ€§
</div>

Notion æ•°æ®åº“çš„å±æ€§ä¼šæ˜ å°„ä¸º Metadataï¼š

```typescript
// ç¤ºä¾‹ï¼šå¸¦æœ‰å±æ€§çš„é¡¹ç›®æ•°æ®åº“
const documents = await client.connections.listDocuments('notion', {
  containerTags: ['user-123']
});

// æŸ¥æ‰¾æ•°æ®åº“æ¡ç›®
const projectEntries = documents.filter(doc =>
  doc.metadata?.database === 'Projects'
);

// æ•°æ®åº“å±æ€§å˜ä¸ºå¯æœç´¢çš„ metadata
const projectWithStatus = await client.search.documents({
  q: "æœºå™¨å­¦ä¹ é¡¹ç›®",
  containerTags: ['user-123'],
  filters: JSON.stringify({
    AND: [
      { key: "status", value: "In Progress", negate: false },
      { key: "priority", value: "High", negate: false }
    ]
  })
});
```


<div id="optimization-strategies">
  ### ä¼˜åŒ–ç­–ç•¥
</div>

1. **æ ¹æ®å·¥ä½œåŒºè§„æ¨¡è®¾ç½®åˆé€‚çš„æ–‡æ¡£ä¸Šé™**
2. **ä½¿ç”¨æœ‰é’ˆå¯¹æ€§çš„å®¹å™¨æ ‡ç­¾**ä»¥æå‡ç»„ç»‡æ•ˆç‡
3. **ç›‘æ§æ•°æ®åº“åŒæ­¥æ€§èƒ½**ï¼Œåº”å¯¹å¤§è§„æ¨¡æ•°æ®é›†
4. **å®æ–½å†…å®¹è¿‡æ»¤**ï¼Œä»…åŒæ­¥ç›¸å…³é¡µé¢
5. **åœ¨åº”ç”¨ä¸­ä¼˜é›…å¤„ç† webhook å»¶è¿Ÿ**

<Callout type="info">
**Notion ä¸“å±ä¼˜åŠ¿ï¼š**
- é€šè¿‡ webhook å®ç°å®æ—¶åŒæ­¥ä¸å³æ—¶æ›´æ–°
- ä¿ç•™ä¸°å¯Œçš„æ ¼å¼ä¸å—ï¼ˆblockï¼‰ç»“æ„
- æ•°æ®åº“å±æ€§å°†æˆä¸ºå¯æœç´¢çš„ Metadata
- ä¿æŒå±‚çº§é¡µé¢ç»“æ„
- æ”¯æŒåä½œå¼å·¥ä½œåŒº
</Callout>

<Warning>
**é‡è¦é™åˆ¶ï¼š**
- å¤æ‚çš„å—æ ¼å¼åœ¨è½¬æ¢ä¸º Markdown æ—¶å¯èƒ½è¢«ç®€åŒ–
- å¤§å‹æ•°æ®åº“çš„åˆå§‹åŒæ­¥å¯èƒ½è€—æ—¶è¾ƒé•¿
- å·¥ä½œåŒºæƒé™ä¼šå½±å“å¯è®¿é—®å†…å®¹çš„èŒƒå›´
- Notion API çš„é€Ÿç‡é™åˆ¶å¯èƒ½å½±å“å¤§å‹å·¥ä½œåŒºçš„åŒæ­¥é€Ÿåº¦
- å†…åµŒæ–‡ä»¶å’Œå›¾ç‰‡ä»¥å¼•ç”¨æ–¹å¼ä¿ç•™ï¼Œä¸ç›´æ¥å­˜å‚¨
</Warning>