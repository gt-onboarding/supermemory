---
title: "ä¸ªäºº AI åŠ©æ‰‹"
description: "æ„å»ºä¸€æ¬¾èƒ½åœ¨å¤šè½®å¯¹è¯ä¸­è®°ä½ç”¨æˆ·åå¥½ã€ä¹ æƒ¯ä¸ä¸Šä¸‹æ–‡çš„ AI åŠ©æ‰‹"
---

æ„å»ºä¸€ä¸ªä¸ªäºº AI åŠ©æ‰‹ï¼Œèƒ½å¤Ÿå­¦ä¹ å¹¶è®°ä½æœ‰å…³ç”¨æˆ·çš„ä¸€åˆ‡â€”â€”ä»–ä»¬çš„åå¥½ã€ä¹ æƒ¯ã€å·¥ä½œèƒŒæ™¯ä¸å¯¹è¯å†å²ã€‚æ­¤ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Supermemory çš„ Memory Tools æ‰“é€ çœŸæ­£ä¸ªæ€§åŒ–çš„ AI ä½“éªŒã€‚

<div id="what-youll-build">
  ## ä½ å°†æ„å»ºçš„å†…å®¹
</div>

ä¸€ä¸ªä¸ªäºº AI åŠ©æ‰‹ï¼Œå®ƒå¯ä»¥ï¼š

- **è®°ä½ç”¨æˆ·åå¥½**ï¼ˆé¥®é£Ÿç¦å¿Œã€å·¥ä½œå®‰æ’ã€æ²Ÿé€šé£æ ¼ï¼‰
- **ä»å¯¹è¯ä¸­ä¸æ–­å­¦ä¹ **ï¼Œå¹¶éšç€æ—¶é—´æ”¹è¿›å›å¤
- **åœ¨å¤šæ¬¡èŠå¤©ä¼šè¯é—´ä¿æŒä¸Šä¸‹æ–‡**
- **åŸºäºç”¨æˆ·å†å²æä¾›ä¸ªæ€§åŒ–æ¨è**
- **åœ¨ä¿æŒä¸Šä¸‹æ–‡çš„åŒæ—¶å¤„ç†å¤šä¸ªè¯é¢˜**

<div id="prerequisites">
  ## å‰ç½®æ¡ä»¶
</div>

- Node.js 18+ æˆ– Python 3.8+
- Supermemory API å¯†é’¥
- OpenAI æˆ– Anthropic API å¯†é’¥
- å…·å¤‡èŠå¤©åº”ç”¨çš„åŸºç¡€çŸ¥è¯†

<div id="implementation">
  ## å®ç°
</div>

<div id="step-1-project-setup">
  ### ç¬¬ 1 æ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–
</div>

<Tabs>
  <Tab title="Next.js (TypeScript)">
    ```bash
    npx create-next-app@latest personal-ai --typescript --tailwind --eslint
    cd personal-ai
    npm install @supermemory/tools ai openai
    ```

    åˆ›å»ºç¯å¢ƒå˜é‡ï¼š
    ```bash .env.local
    SUPERMEMORY_API_KEY=your_supermemory_key
    OPENAI_API_KEY=your_openai_key
    ```
  </Tab>

  <Tab title="Python">
    ```bash
    mkdir personal-ai && cd personal-ai
    python -m venv venv
    source venv/bin/activate  # Windows ä¸Šä¸ºï¼švenv\Scripts\activate
    pip install supermemory openai fastapi uvicorn python-multipart
    ```

    åˆ›å»ºç¯å¢ƒå˜é‡ï¼š
    ```bash .env
    SUPERMEMORY_API_KEY=your_supermemory_key
    OPENAI_API_KEY=your_openai_key
    ```
  </Tab>
</Tabs>

<div id="step-2-core-assistant-logic">
  ### æ­¥éª¤ 2ï¼šæ ¸å¿ƒåŠ©ç†é€»è¾‘
</div>

<Tabs>
  <Tab title="Next.js API è·¯ç”±">
    ```typescript app/api/chat/route.ts
    import { streamText } from 'ai'
    import { createOpenAI } from '@ai-sdk/openai'
    import { supermemoryTools } from '@supermemory/tools/ai-sdk'

    const openai = createOpenAI({
      apiKey: process.env.OPENAI_API_KEY!
    })

    export async function POST(request: Request) {
      const { messages, userId = 'default-user' } = await request.json()

      const result = await streamText({
        model: openai('gpt-5'),
        messages,
        tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
          containerTags: [userId]
        }),
        system: `ä½ æ˜¯ä¸€åé«˜åº¦ä¸ªæ€§åŒ–çš„ AI åŠ©æ‰‹ã€‚ä½ çš„é¦–è¦ç›®æ ‡æ˜¯äº†è§£ç”¨æˆ·ï¼Œå¹¶éšç€æ—¶é—´çš„æ¨ç§»æä¾›è¶Šæ¥è¶Šä¸ªæ€§åŒ–çš„å¸®åŠ©ã€‚

    è®°å¿†ç®¡ç†ï¼š
    1. å½“ç”¨æˆ·åˆ†äº«ä¸ªäººä¿¡æ¯ã€åå¥½æˆ–ä¸Šä¸‹æ–‡æ—¶ï¼Œç«‹å³ä½¿ç”¨ addMemory è¿›è¡Œå­˜å‚¨
    2. åœ¨å›åº”è¯·æ±‚å‰ï¼Œå…ˆåœ¨ä½ çš„è®°å¿†ä¸­æœç´¢ä¸è¯¥ç”¨æˆ·ç›¸å…³çš„ä¸Šä¸‹æ–‡
    3. åˆ©ç”¨ä»¥å¾€å¯¹è¯æ¥æŒ‡å¯¼å½“å‰å›å¤
    4. è®°ä½ç”¨æˆ·çš„æ²Ÿé€šé£æ ¼ã€åå¥½ä»¥åŠå¸¸è°ˆè®ºçš„è¯é¢˜

    ä¸ªæ€§ä¸é£æ ¼ï¼š
    - è°ƒæ•´ä½ çš„æ²Ÿé€šæ–¹å¼ä»¥åŒ¹é…ç”¨æˆ·çš„åå¥½
    - åœ¨åˆé€‚çš„æƒ…å¢ƒä¸‹è‡ªç„¶å¼•ç”¨è¿‡å¾€å¯¹è¯
    - åŸºäºå·²å­¦åˆ°çš„æ¨¡å¼ä¸»åŠ¨æä¾›å¸®åŠ©
    - åœ¨å°Šé‡éšç§çš„å‰æä¸‹çœŸæ­£åšåˆ°æœ‰ç”¨

    å»ºè®®è®°ä½çš„å†…å®¹ç¤ºä¾‹ï¼š
    - å·¥ä½œæ—¶é—´å®‰æ’ä¸èŒè´£è§’è‰²
    - é¥®é£Ÿåå¥½/ç¦å¿Œ
    - æ²Ÿé€šåå¥½ï¼ˆæ­£å¼/éšæ„ï¼‰
    - é¢‘ç¹æ„Ÿå…´è¶£çš„è¯é¢˜
    - æ­£åœ¨æ¨è¿›çš„ç›®æ ‡ä¸é¡¹ç›®
    - ä»–ä»¬åˆ†äº«çš„å®¶åº­/ä¸ªäººèƒŒæ™¯
    - åå¥½çš„å·¥å…·ä¸å·¥ä½œæµ
    - æ—¶åŒºä¸å¯ç”¨æ—¶æ®µ

    åœ¨ä½œç­”å‰åŠ¡å¿…å…ˆæœç´¢è®°å¿†ï¼Œä»¥æä¾›ä¸ªæ€§åŒ–ã€å…·å¤‡ä¸Šä¸‹æ–‡çš„å¸®åŠ©ã€‚`
      })

      return result.toAIStreamResponse()
    }
    ```
  </Tab>

  <Tab title="Python FastAPI">
    ```python main.py
    from fastapi import FastAPI, HTTPException
    from fastapi.responses import StreamingResponse
    import openai
    from supermemory import Supermemory
    import json
    import os
    from typing import List, Dict, Any
    import asyncio

    app = FastAPI()

    openai_client = openai.AsyncOpenAI(api_key=os.getenv("OPENAI_API_KEY"))
    supermemory_client = Supermemory(api_key=os.getenv("SUPERMEMORY_API_KEY"))

    SYSTEM_PROMPT = """ä½ æ˜¯ä¸€åé«˜åº¦ä¸ªæ€§åŒ–çš„ AI åŠ©æ‰‹ã€‚ä½ çš„é¦–è¦ç›®æ ‡æ˜¯äº†è§£ç”¨æˆ·ï¼Œå¹¶éšç€æ—¶é—´çš„æ¨ç§»æä¾›æ„ˆåŠ ä¸ªæ€§åŒ–çš„å¸®åŠ©ã€‚

    è®°å¿†ç®¡ç†ï¼š
    1. å½“ç”¨æˆ·åˆ†äº«ä¸ªäººä¿¡æ¯ã€åå¥½æˆ–ä¸Šä¸‹æ–‡æ—¶ï¼Œç«‹å³å­˜å‚¨
    2. åœ¨å›åº”è¯·æ±‚ä¹‹å‰ï¼Œå…ˆæœç´¢ä¸è¯¥ç”¨æˆ·ç›¸å…³çš„ä¸Šä¸‹æ–‡
    3. ä½¿ç”¨è¿‡å¾€å¯¹è¯æ¥æŒ‡å¯¼å½“å‰å›å¤
    4. è®°ä½ç”¨æˆ·çš„æ²Ÿé€šé£æ ¼ã€åå¥½å’Œå¸¸èŠè¯é¢˜

    äººæ ¼ä¸é£æ ¼ï¼š
    - è°ƒæ•´ä½ çš„æ²Ÿé€šæ–¹å¼ä»¥è´´åˆç”¨æˆ·åå¥½
    - åœ¨åˆé€‚çš„æƒ…å†µä¸‹è‡ªç„¶å¼•ç”¨è¿‡å¾€å¯¹è¯
    - åŸºäºå·²å­¦ä¹ çš„æ¨¡å¼ä¸»åŠ¨æä¾›å¸®åŠ©
    - åœ¨å°Šé‡éšç§çš„å‰æä¸‹çœŸè¯šä¸”æœ‰ç”¨

    åœ¨å›å¤ä¹‹å‰åŠ¡å¿…å…ˆæœç´¢è®°å¿†ï¼Œä»¥æä¾›ä¸ªæ€§åŒ–ã€å…·å¤‡ä¸Šä¸‹æ–‡çš„å¸®åŠ©ã€‚"""

    async def search_user_memories(query: str, user_id: str) -> str:
        """åœ¨ç”¨æˆ·çš„è®°å¿†ä¸­æœç´¢ç›¸å…³ä¸Šä¸‹æ–‡"""
        try:
            results = supermemory_client.search.memories(
                q=query,
                container_tag=f"user_{user_id}",
                limit=5
            )

            if results.results:
                context = "\n".join([r.memory for r in results.results])
                return f"å…³äºè¯¥ç”¨æˆ·çš„ç›¸å…³è®°å¿†ï¼š\n{context}"
            return "æœªæ‰¾åˆ°ç›¸å…³è®°å¿†ã€‚"
        except Exception as e:
            return f"æœç´¢è®°å¿†æ—¶å‡ºé”™ï¼š{e}"

    async def add_user_memory(content: str, user_id: str):
        """å‘ç”¨æˆ·çš„è®°å¿†æ·»åŠ æ–°ä¿¡æ¯"""
        try:
            supermemory_client.memories.add(
                content=content,
                container_tag=f"user_{user_id}",
                metadata={"type": "personal_info", "timestamp": "auto"}
            )
        except Exception as e:
            print(f"æ·»åŠ è®°å¿†æ—¶å‡ºé”™ï¼š{e}")

    @app.post("/chat")
    async def chat_endpoint(data: dict):
        messages = data.get("messages", [])
        user_id = data.get("userId", "default-user")

        if not messages:
            raise HTTPException(status_code=400, detail="No messages provided")
            raise HTTPException(status_code=400, detail="æœªæä¾›æ¶ˆæ¯")
        # è·å–ç”¨æˆ·çš„æœ€åä¸€æ¡æ¶ˆæ¯ä»¥è¿›è¡Œè®°å¿†æœç´¢
        user_message = messages[-1]["content"] if messages else ""

        # æœç´¢ç›¸å…³è®°å¿†
        memory_context = await search_user_memories(user_message, user_id)

        # ä½¿ç”¨è®°å¿†ä¸Šä¸‹æ–‡æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯
        enhanced_messages = [
            {"role": "system", "content": f"{SYSTEM_PROMPT}\n\n{memory_context}"}
        ] + messages

        try:
            response = await openai_client.chat.completions.create(
                model="gpt-5",
                messages=enhanced_messages,
                stream=True,
                temperature=0.7
            )

            async def generate():
                full_response = ""
                async for chunk in response:
                    if chunk.choices[0].delta.content:
                        content = chunk.choices[0].delta.content
                        full_response += content
                        yield f"data: {json.dumps({'content': content})}\n\n"

                # åœ¨å›å¤å®Œæˆåï¼Œåˆ†ææ˜¯å¦åŒ…å«å€¼å¾—å­˜å…¥è®°å¿†çš„å†…å®¹
                if "remember" in user_message.lower() or any(word in user_message.lower() for word in ["prefer", "like", "dislike", "work", "schedule", "diet"]):
                    await add_user_memory(user_message, user_id)

            return StreamingResponse(generate(), media_type="text/plain")

        except Exception as e:
            raise HTTPException(status_code=500, detail=str(e))

    if __name__ == "__main__":
        import uvicorn
        uvicorn.run(app, host="0.0.0.0", port=8000)
    ```
  </Tab>
</Tabs>

<div id="step-3-frontend-interface">
  ### ç¬¬ 3 æ­¥ï¼šå‰ç«¯ç•Œé¢
</div>

<Tabs>
  <Tab title="Next.js èŠå¤©ç»„ä»¶">
    ```tsx app/page.tsx
    'use client'

    import { useChat } from 'ai/react'
    import { useState, useEffect } from 'react'

    export default function PersonalAssistant() {
      const [userId, setUserId] = useState('')
      const [userName, setUserName] = useState('')

      const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
        api: '/api/chat',
        body: {
          userId
        }
      })

      // Generate or retrieve user ID
      useEffect(() => {
        const storedUserId = localStorage.getItem('personal-ai-user-id')
        const storedUserName = localStorage.getItem('personal-ai-user-name')

        if (storedUserId) {
          setUserId(storedUserId)
          setUserName(storedUserName || '')
        } else {
          const newUserId = `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
          localStorage.setItem('personal-ai-user-id', newUserId)
          setUserId(newUserId)
        }
      }, [])

      const handleNameSubmit = (e: React.FormEvent) => {
        e.preventDefault()
        if (userName.trim()) {
          localStorage.setItem('personal-ai-user-name', userName)
          // å‘é€è‡ªæˆ‘ä»‹ç»
          handleSubmit(e, {
            data: {
              content: `å—¨ï¼æˆ‘å« ${userName}ã€‚æˆ‘æƒ³è¦ä¸€ä½èƒ½äº†è§£æˆ‘ã€å¹¶åœ¨å„ç±»ä»»åŠ¡ä¸Šå¸®åŠ©æˆ‘çš„ä¸ªäºº AI åŠ©æ‰‹ã€‚`
            }
          })
        }
      }

      return (
        <div className="flex flex-col h-screen max-w-4xl mx-auto p-4">
          {/* Header */}
          <div className="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-lg mb-6">
            <h1 className="text-2xl font-bold">ä¸ªäºº AI åŠ©æ‰‹</h1>
            <p className="text-blue-100">
              {userName ? `ä½ å¥½ï¼Œ${userName}ï¼` : 'ä¼šå­¦ä¹ å¹¶è®°å¿†çš„ AI åŠ©æ‰‹'}
            </p>
          </div>

          {/* åç§°è®¾ç½® */}
          {!userName && (
            <div className="bg-white border border-gray-200 rounded-lg p-6 mb-6">
              <form onSubmit={handleNameSubmit} className="flex gap-2">
                <input
                  type="text"
                  value={userName}
                  onChange={(e) => setUserName(e.target.value)}
                  placeholder="æˆ‘è¯¥æ€ä¹ˆç§°å‘¼ä½ ï¼Ÿ"
                  className="flex-1 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <button
                  type="submit"
                  className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  å¼€å§‹ä½¿ç”¨
                </button>
              </form>
            </div>
          )}

          {/* æ¶ˆæ¯ */}
          <div className="flex-1 overflow-y-auto space-y-4 mb-4">
            {messages.length === 0 && userName && (
              <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p className="text-gray-600">
                  å—¨ï¼Œ{userName}ï¼æˆ‘æ˜¯ä½ çš„ä¸ªäºº AI åŠ©æ‰‹ã€‚æ¥ä¸‹æ¥çš„å¯¹è¯ä¸­ï¼Œæˆ‘ä¼šäº†è§£ä½ çš„åå¥½ã€å·¥ä½œæ–¹å¼å’Œå…´è¶£ã€‚æ¬¢è¿åˆ†äº«ä»»ä½•ä½ å¸Œæœ›æˆ‘è®°ä½çš„å†…å®¹ï¼
                  work style, and interests as we chat. Feel free to share anything you'd like me to remember!
                </p>
                <div className="mt-3 text-sm text-gray-500">
                  <p><strong>å¯ä»¥è¯•è¯•è¯´ï¼š</strong></p>
                  <ul className="list-disc list-inside mt-1 space-y-1">
                    <li>â€œæˆ‘æ˜¯ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œåå¥½ç®€æ´çš„å›å¤â€</li>
                    <li>â€œè®°ä½æˆ‘åƒç´ ï¼Œå¹¶ä¸”å¯¹åšæœè¿‡æ•â€</li>
                    <li>â€œæˆ‘é€šå¸¸åœ¨ä¸œéƒ¨æ—¶é—´ 9 ç‚¹åˆ° 5 ç‚¹å·¥ä½œï¼Œä¸­åˆåƒåˆé¥­â€</li>
                  </ul>
                </div>
              </div>
            )}

            {messages.map((message) => (
              <div
                key={message.id}
                className={`p-4 rounded-lg ${
                  message.role === 'user'
                    ? 'bg-blue-500 text-white ml-auto max-w-2xl'
                    : 'bg-white border border-gray-200 max-w-2xl'
                }`}
              >
                <div className="flex items-start space-x-2">
                  {message.role === 'assistant' && (
                    <div className="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold">
                      AI
                    </div>
                  )}
                  <div className="flex-1">
                    <p className="whitespace-pre-wrap">{message.content}</p>
                  </div>
                </div>
              </div>
            ))}

            {isLoading && (
              <div className="bg-white border border-gray-200 rounded-lg p-4 max-w-2xl">
                <div className="flex items-center space-x-2">
                  <div className="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold">
                  AI
                  </div>
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.1s'}}></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                  </div>
                </div>
              </div>
            )}
          </div>

          {/* è¾“å…¥ */}
          {userName && (
            <form onSubmit={handleSubmit} className="flex gap-2">
              <input
                value={input}
                onChange={handleInputChange}
                placeholder="å‘Šè¯‰æˆ‘ä¸€äº›ä½ çš„æƒ…å†µï¼Œæˆ–å‘æˆ‘å¯»æ±‚å¸®åŠ©â€¦â€¦"
                className="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                disabled={isLoading}
              />
              <button
                type="submit"
                disabled={isLoading || !input.trim()}
                className="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                å‘é€
              </button>
            </form>
          )}
        </div>
      )
    }
    ```
  </Tab>

  <Tab title="Pythonï¼ˆStreamlitï¼‰">
    ```python streamlit_app.py
    import streamlit as st
    import requests
    import json
    import uuid

    st.set_page_config(page_title="ä¸ªäºº AI åŠ©æ‰‹", page_icon="ğŸ¤–", layout="wide")

    # Initialize session state
    if 'messages' not in st.session_state:
        st.session_state.messages = []
    if 'user_id' not in st.session_state:
        st.session_state.user_id = f"user_{uuid.uuid4().hex[:8]}"
    if 'user_name' not in st.session_state:
        st.session_state.user_name = None

    # Header
    st.title("ğŸ¤– ä¸ªäºº AI åŠ©æ‰‹")
    st.markdown("*ä¼šå­¦ä¹ å¹¶è®°å¿†çš„ AI*")

    # Sidebar for user info
    with st.sidebar:
    st.header("ğŸ‘¤ ç”¨æˆ·æ¡£æ¡ˆ")

        if not st.session_state.user_name:
    name = st.text_input("æˆ‘åº”è¯¥æ€ä¹ˆç§°å‘¼ä½ ï¼Ÿ")
            if st.button("å¼€å§‹ä½¿ç”¨") and name:
                st.session_state.user_name = name
                st.session_state.messages.append({
                    "role": "user",
                    "content": f"å—¨ï¼æˆ‘å« {name}ã€‚æˆ‘æ­£åœ¨å¯»æ‰¾ä¸€æ¬¾ä¸ªäºº AI åŠ©æ‰‹ã€‚"
                })
                st.rerun()
        else:
            st.write(f"**å§“åï¼š** {st.session_state.user_name}")
            st.write(f"**ç”¨æˆ· IDï¼š** {st.session_state.user_id[:12]}...")

            if st.button("é‡ç½®å¯¹è¯"):
                st.session_state.messages = []
                st.rerun()

        st.markdown("---")
        st.markdown("""
        ### ğŸ’¡ å¯ä»¥è¯•ç€è¯´ï¼š
        - "æˆ‘æ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œåå¥½ç®€æ´çš„å›ç­”"
        - "è¯·è®°ä½æˆ‘æ˜¯ç´ é£Ÿè€…"
        - "æˆ‘é€šå¸¸åœ¨ä¸œéƒ¨æ—¶é—´ 9 ç‚¹åˆ° 5 ç‚¹å·¥ä½œ"
        """)

    # Main chat interface
    if st.session_state.user_name:
        # Display messages
        for message in st.session_state.messages:
            with st.chat_message(message["role"]):
                st.markdown(message["content"])

        # Chat input
        if prompt := st.chat_input("å…ˆä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ï¼Œæˆ–å‘Šè¯‰æˆ‘ä½ éœ€è¦ä»€ä¹ˆå¸®åŠ©â€¦"):
            # Add user message
            st.session_state.messages.append({"role": "user", "content": prompt})

            with st.chat_message("user"):
                st.markdown(prompt)

            # Get AI response
            with st.chat_message("assistant"):
                with st.spinner("æ€è€ƒä¸­â€¦"):
                    try:
                        response = requests.post(
                            "http://localhost:8000/chat",
                            json={
                                "messages": st.session_state.messages,
                                "userId": st.session_state.user_id
                            },
                            timeout=30
                        )

                        if response.status_code == 200:
                            # Handle streaming response
                            full_response = ""
                            for line in response.iter_lines():
                                if line:
                                    try:
                                        data = json.loads(line.decode('utf-8').replace('data: ', ''))
                                        if 'content' in data:
                                            full_response += data['content']
                                    except:
                                        continue

                            st.markdown(full_response)
                            st.session_state.messages.append({
                                "role": "assistant",
                                "content": full_response
                            })
                        else:
                            st.error(f"é”™è¯¯ï¼š{response.status_code}")
                    except Exception as e:
                        st.error(f"è¿æ¥é”™è¯¯ï¼š{e}")

    else:
        st.info("ğŸ‘† è¯·åœ¨ä¾§è¾¹æ è¾“å…¥ä½ çš„å§“åä»¥å¼€å§‹ï¼")

    # è¿è¡Œæ–¹å¼ï¼šstreamlit run streamlit_app.py
    ```
  </Tab>
</Tabs>

<div id="testing-your-assistant">
  ## æµ‹è¯•ä½ çš„åŠ©æ‰‹
</div>

<div id="step-4-test-memory-formation">
  ### æ­¥éª¤ 4ï¼šæµ‹è¯• memory å½¢æˆ
</div>

å°è¯•ä»¥ä¸‹å¯¹è¯æµç¨‹æ¥æµ‹è¯• memory èƒ½åŠ›ï¼š

1. **ä¸ªäººåå¥½**ï¼š
   ```
   User: "Hi! I'm Sarah, a product manager at a tech startup. I prefer brief, actionable responses and I'm always busy with user research."

   Assistant: [åº”è®°ä½å§“åã€è§’è‰²ã€æ²Ÿé€šåå¥½]

   User: "What's a good way to prioritize features?"

   Assistant: [åº”ç»“åˆä½ æ˜¯ PM ä¸”åå¥½ç®€çŸ­ã€å¯æ‰§è¡Œçš„å›å¤]
   ```

2. **é¥®é£Ÿä¸ç”Ÿæ´»æ–¹å¼**ï¼š
   ```
   User: "Remember that I'm vegan and I work out every morning at 6 AM."

   User: "Suggest a quick breakfast for tomorrow."

   Assistant: [åº”æ¨èé€‚åˆè¿åŠ¨å‰/åçš„çº¯ç´ é€‰é¡¹]
   ```

3. **å·¥ä½œèƒŒæ™¯**ï¼š
   ```
   User: "I'm working on a React project and I prefer TypeScript over JavaScript."

   User: "Help me with state management."

   Assistant: [åº”æä¾›é¢å‘ TypeScript çš„è§£å†³æ–¹æ¡ˆ]
   ```

<div id="step-5-verify-memory-storage">
  ### æ­¥éª¤ 5ï¼šéªŒè¯è®°å¿†å­˜å‚¨
</div>

æ£€æŸ¥æ˜¯å¦å·²æ­£ç¡®å­˜å‚¨è®°å¿†ï¼š

<Tabs>
  <Tab title="TypeScript">
    ```typescript scripts/check-memories.ts
    import { Supermemory } from '@supermemory/tools'

    const client = new Supermemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!
    })

    async function checkUserMemories(userId: string) {
      try {
        const memories = await client.memories.list({
          containerTags: [userId],
          limit: 20,
          sort: 'updatedAt',
          order: 'desc'
        })

        console.log(`Found ${memories.memories.length} memories for ${userId}:`)
        memories.memories.forEach((memory, i) => {
          console.log(`${i + 1}. ${memory.content.substring(0, 100)}...`)
        })

        // Test search
        const searchResults = await client.search.memories({
          q: "preferences work",
          containerTag: userId,
          limit: 5
        })

        console.log('\nSearch Results:')
        searchResults.results.forEach((result, i) => {
          console.log(`${i + 1}. (${result.similarity}) ${result.memory.substring(0, 100)}...`)
        })

      } catch (error) {
        console.error('Error:', error)
      }
    }

    // Run: npx ts-node scripts/check-memories.ts USER_ID_HERE
    checkUserMemories(process.argv[2] || 'default-user')
    ```
  </Tab>

  <Tab title="Python">
    ```python check_memories.py
    from supermemory import Supermemory
    import os
    import sys

    client = Supermemory(api_key=os.getenv("SUPERMEMORY_API_KEY"))

    def check_user_memories(user_id):
        try:
            # List all memories for user
            memories = client.memories.list(
                container_tags=[user_id],
                limit=20,
                sort="updatedAt",
                order="desc"
            )

            print(f"Found {len(memories.memories)} memories for {user_id}:")
            for i, memory in enumerate(memories.memories):
                print(f"{i + 1}. {memory.content[:100]}...")

            # Test search
            search_results = client.search.memories(
                q="preferences work",
                container_tag=user_id,
                limit=5
            )

            print('\nSearch Results:')
            for i, result in enumerate(search_results.results):
                print(f"{i + 1}. ({result.similarity}) {result.memory[:100]}...")

        except Exception as error:
            print(f'Error: {error}')

    # Run: python check_memories.py USER_ID_HERE
    user_id = sys.argv[1] if len(sys.argv) > 1 else 'default-user'
    check_user_memories(user_id)
    ```
  </Tab>
</Tabs>

<div id="production-considerations">
  ## ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹
</div>

<div id="security-privacy">
  ### å®‰å…¨ä¸éšç§
</div>

1. **ç”¨æˆ·éš”ç¦»**:
   ```typescript
   // å§‹ç»ˆä½¿ç”¨æŒ‰ç”¨æˆ·åŒºåˆ†çš„ container tags
   const tools = supermemoryTools(apiKey, {
     containerTags: [userId]
   })
   ```

2. **memory åŠ å¯†**:
   ```typescript
   // å¯¹æ•æ„Ÿæ•°æ®ï¼Œå»ºè®®ä½¿ç”¨å®¢æˆ·ç«¯åŠ å¯†
   const encryptedContent = encrypt(sensitiveData, userKey)
   await client.memories.add({
     content: encryptedContent,
     containerTag: userId,
     metadata: { encrypted: true }
   })
   ```

<div id="performance-optimization">
  ### æ€§èƒ½ä¼˜åŒ–
</div>

1. **memory æœç´¢ä¼˜åŒ–**:
   ```typescript
   // åœ¨é€Ÿåº¦ä¸å‡†ç¡®æ€§ä¹‹é—´é€‰æ‹©åˆé€‚çš„æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼
   const quickSearch = await client.search.memories({
     q: userQuery,
     containerTag: userId,
     threshold: 0.6,     // å…¼é¡¾
     rerank: false,      // ä¸ºæé€Ÿè·³è¿‡
     limit: 3            // è¿”å›æ›´å°‘ç»“æœ
   })
   ```

2. **ç¼“å­˜ç­–ç•¥**:
   ```typescript
   // ç¼“å­˜é«˜é¢‘è®¿é—®çš„ç”¨æˆ·ä¸Šä¸‹æ–‡
   const userContext = await redis.get(`user_context:${userId}`)
   if (!userContext) {
     const memories = await client.search.memories({
       q: "user preferences work style",
       containerTag: userId,
       limit: 10
     })
     await redis.setex(`user_context:${userId}`, 300, JSON.stringify(memories))
   }
   ```

<div id="monitoring-analytics">
  ### ç›‘æ§ä¸åˆ†æ
</div>

```typescript
// è·Ÿè¸ª memory çš„åˆ›å»ºä¸æ£€ç´¢
const analytics = {
  memoriesCreated: await redis.incr(`memories_created:${userId}`),
  searchesPerformed: await redis.incr(`searches:${userId}`),
  conversationLength: messages.length
}

// è®°å½•ç”¨äºåˆ†æ
console.log('ç”¨æˆ·äº¤äº’:', {
  userId,
  action: 'chat_response',
  memoriesFound: searchResults.results.length,
  responseTime: Date.now() - startTime,
  ...analytics
})
```


<div id="extensions-customization">
  ## æ‰©å±•ä¸å®šåˆ¶
</div>

<div id="1-add-personality-profiles">
  ### 1. æ·»åŠ äººç‰©ç”»åƒ
</div>

```typescript
const personalityProfiles = {
  professional: "ä»¥æ­£å¼ã€ç¬¦åˆå•†åŠ¡åœºåˆçš„è¯­æ°”å›åº”",
  casual: "ä½¿ç”¨å‹å¥½ã€å¯¹è¯å¼çš„è¯­æ°”ï¼Œé€‚å½“åŠ å…¥å¹½é»˜",
  technical: "æä¾›è¯¦å°½çš„æŠ€æœ¯è¯´æ˜ï¼Œå¹¶é™„ç¤ºä¾‹",
  concise: "ä¿æŒå›ç­”ç®€æ´ä¸”ç›´æˆªäº†å½“"
}

// æ ¹æ®ç”¨æˆ·åå¥½æ·»åŠ åˆ°ç³»ç»Ÿæç¤º
const userProfile = await getUserProfile(userId)
const systemPrompt = `${basePrompt}\n\næ²Ÿé€šé£æ ¼ï¼š${personalityProfiles[userProfile.style]}`
```


<div id="2-smart-notifications">
  ### 2. æ™ºèƒ½é€šçŸ¥
</div>

```typescript
// åŸºäºç”¨æˆ·è¡Œä¸ºæ¨¡å¼çš„ä¸»åŠ¨å»ºè®®
const shouldSuggest = await analyzeUserPatterns(userId)
if (shouldSuggest.type === 'daily_standup') {
  return {
    message: "æ ¹æ®ä½ çš„æ—¥ç¨‹å®‰æ’ï¼Œéœ€è¦æˆ‘å¸®ä½ å‡†å¤‡ä¸Šåˆ9ç‚¹çš„ç«™ä¼šå—ï¼Ÿ",
    suggestedActions: ["å›é¡¾æ˜¨å¤©çš„è¿›å±•", "åˆ¶å®šä»Šå¤©çš„ç›®æ ‡"]
  }
}
```


<div id="3-multi-modal-memory">
  ### 3. å¤šæ¨¡æ€ memory
</div>

```typescript
// å¤„ç†å›¾ç‰‡å’Œæ–‡æ¡£
if (message.attachments) {
  for (const attachment of message.attachments) {
    await client.memories.uploadFile({
      file: attachment,
      containerTag: userId,
      metadata: {
        type: 'user_shared',
        context: message.content
      }
    })
  }
}
```


<div id="next-steps">
  ## ä¸‹ä¸€æ­¥
</div>

- **æ‰©å±•è‡³å¤šç”¨æˆ·**ï¼šæ·»åŠ ç”¨æˆ·èº«ä»½éªŒè¯å¹¶å®ç°å®Œå–„çš„éš”ç¦»
- **åŠ å…¥è¯­éŸ³äº¤äº’**ï¼šé›†æˆè¯­éŸ³è½¬æ–‡æœ¬/æ–‡æœ¬è½¬è¯­éŸ³ API
- **ç§»åŠ¨åº”ç”¨**ï¼šæ„å»º React Native æˆ– Flutter ç‰ˆç§»åŠ¨åº”ç”¨
- **é›†æˆ**ï¼šè¿æ¥æ—¥å†ã€é‚®ä»¶ã€ä»»åŠ¡ç®¡ç†å·¥å…·
- **é«˜çº§ AI åŠŸèƒ½**ï¼šåŠ å…¥æƒ…ç»ªè¯†åˆ«ã€ä¼šè¯æ‘˜è¦

<div id="troubleshooting">
  ## ç–‘éš¾è§£ç­”
</div>

**Memory æœªè¢«æŒä¹…åŒ–ï¼Ÿ**

- æ£€æŸ¥æ˜¯å¦å§‹ç»ˆä½¿ç”¨ä¸€è‡´çš„ `x-sm-user-id` è¯·æ±‚å¤´
- éªŒè¯ API å¯†é’¥æ˜¯å¦å…·å¤‡å†™å…¥æƒé™
- ç¡®ä¿å®¹å™¨æ ‡ç­¾é…ç½®æ­£ç¡®

**å“åº”ç¼ºä¹ä¸ªæ€§åŒ–ï¼Ÿ**

- å¢å¤§æœç´¢ limit ä»¥æ£€ç´¢æ›´å¤šç›¸å…³çš„è®°å¿†å­˜å‚¨
- é™ä½ æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼ æ‰©å¤§åŒ¹é…èŒƒå›´
- æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¸‹æ·»åŠ äº†è®°å¿†å­˜å‚¨

**æ€§èƒ½é—®é¢˜ï¼Ÿ**

- å‡å°æœç´¢ limit ä»¥æå‡å“åº”é€Ÿåº¦
- ä¸ºé«˜é¢‘æœç´¢å®ç°ç¼“å­˜
- ä½¿ç”¨åˆé€‚çš„ æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼ åœ¨é€Ÿåº¦ä¸å‡†ç¡®æ€§ä¹‹é—´å–å¾—å¹³è¡¡

---

*æ­¤é…æ–¹ä¸ºä¸ªäºº AI åŠ©æ‰‹æä¾›åŸºç¡€ï¼Œå¯æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚å’Œç”¨ä¾‹è¿›è¡Œè‡ªå®šä¹‰ã€‚*