---
title: "Busca de memórias (/v4/search)"
description: "Busca com Latency mínima, otimizada para chatbots e IA conversacional"
---

A busca de memórias (`POST /v4/search`) oferece Latency mínima, otimizada para interações em tempo real. Este endpoint prioriza a velocidade em detrimento de controles extensivos, tornando-o ideal para chatbots, sistemas de perguntas e respostas (Q&A) e qualquer aplicação em que os usuários esperam respostas imediatas.

<div id="basic-search">
  ## Busca básica
</div>

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    import Supermemory from 'supermemory';

    const client = new Supermemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!
    });

    const results = await client.search.memories({
      q: "machine learning applications",
      limit: 5
    });

    console.log(results)
    ```
  </Tab>

  <Tab title="Python">
    ```python
    from supermemory import Supermemory
    import os

    client = Supermemory(api_key=os.environ.get("SUPERMEMORY_API_KEY"))

    results = client.search.memories(
        q="machine learning applications",
        limit=5
    )

    print(results)
    ```
  </Tab>

  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "machine learning applications",
        "limit": 5
      }'
    ```
  </Tab>
</Tabs>

**Exemplo de resultado:**

```json
{
  "results": [
    {
      "id": "mem_ml_apps_2024",
      "memory": "As aplicações de aprendizado de máquina abrangem diversos setores, incluindo saúde (diagnóstico por imagem, descoberta de fármacos), finanças (detecção de fraudes, negociação algorítmica), veículos autônomos (visão computacional, planejamento de trajetória) e processamento de linguagem natural (chatbots, serviços de tradução).",
      "similarity": 0.92,
      "title": "Aplicações de Aprendizado de Máquina na Indústria",
      "type": "text",
      "metadata": {
        "topic": "machine-learning",
        "industry": "technology",
        "created": "2024-01-10"
      }
    },
    {
      "id": "mem_ml_healthcare",
      "memory": "Na saúde, o aprendizado de máquina viabiliza a detecção precoce de doenças por meio da análise de imagens médicas, recomendações de tratamento personalizadas e aceleração da descoberta de fármacos ao prever o comportamento molecular.",
      "similarity": 0.89,
      "title": "AM na Saúde"
      "type": "text"
    }
  ],
  "total": 8,
  "timing": 87
}
```


<div id="container-tag-filtering">
  ## Filtragem por container tag
</div>

Filtre por usuário, projeto ou organização:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "project updates",
      containerTag: "user_123",  // Observação: singular, não plural
      limit: 10
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="project updates",
        container_tag="user_123",  # Observação: singular, não plural
        limit=10
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "project updates",
        "containerTag": "user_123",
        "limit": 10
      }'
    ```
  </Tab>
</Tabs>

<div id="threshold-control">
  ## Controle de Threshold
</div>

Controle a qualidade dos resultados com o threshold de similaridade:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "artificial intelligence research",
      threshold: 0.7,  // Quanto maior, menos resultados e mais semelhantes
      limit: 10
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="artificial intelligence research",
        threshold=0.7,  # Quanto maior, menos resultados e mais semelhantes
        limit=10
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "artificial intelligence research",
        "threshold": 0.7,
        "limit": 10
      }'
    ```
  </Tab>
</Tabs>

<div id="reranking">
  ## Reranking
</div>

Melhore a qualidade dos resultados com uma segunda etapa de ranqueamento:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "quantum computing breakthrough",
      rerank: true,  // Melhor relevância, leve aumento de Latency
      limit: 5
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="quantum computing breakthrough",
        rerank=True,  # Melhor relevância, leve aumento de Latency
        limit=5
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "quantum computing breakthrough",
        "rerank": true,
        "limit": 5
      }'
    ```
  </Tab>
</Tabs>

<div id="query-rewriting">
  ## Reescrita de Consulta
</div>

Melhore a precisão da busca com expansão automática da consulta:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "How do neural networks learn?",
      rewriteQuery: true,  // +400 ms de Latency, mas com melhores resultados
      limit: 5
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="How do neural networks learn?",
        rewrite_query=True,  # +400 ms de Latency, mas com melhores resultados
        limit=5
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "How do neural networks learn?",
        "rewriteQuery": true,
        "limit": 5
      }'
    ```
  </Tab>
</Tabs>

<div id="include-related-content">
  ## Incluir conteúdo relacionado
</div>

Inclua documentos, memórias relacionadas e resumos:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "machine learning trends",
      include: {
        documents: true,        // Incluir documentos de origem
        relatedMemories: true,  // Incluir entradas de memória relacionadas
        summaries: true         // Incluir resumos de memória
      },
      limit: 5
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="machine learning trends",
        include={
            "documents": True,        # Incluir documentos de origem
            "relatedMemories": True,  # Incluir entradas de memória relacionadas
            "summaries": True         # Incluir resumos de memória
        },
        limit=5
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "machine learning trends",
        "include": {
          "documents": true,
          "relatedMemories": true,
          "summaries": true
        },
        "limit": 5
      }'
    ```
  </Tab>
</Tabs>

<div id="metadata-filtering">
  ## Filtragem por metadata
</div>

Filtragem simples por metadata para a busca de memórias:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "research findings",
      filters: {
        AND: [
          { key: "category", value: "science", negate: false },
          { key: "status", value: "published", negate: false }
        ]
      },
      limit: 10
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="research findings",
        filters={
            "AND": [
                {"key": "category", "value": "science", "negate": False},
                {"key": "status", "value": "published", "negate": False}
            ]
        },
        limit=10
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "research findings",
        "filters": {
          "AND": [
            {"key": "category", "value": "science", "negate": false},
            {"key": "status", "value": "published", "negate": false}
          ]
        },
        "limit": 10
      }'
    ```
  </Tab>
</Tabs>

<div id="chatbot-example">
  ## Exemplo de Chatbot
</div>

Configuração ideal para IA conversacional:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    // Otimizado para respostas de chatbot
    const results = await client.search.memories({
      q: userMessage,
      containerTag: userId,
      threshold: 0.6,     // Relevância equilibrada
      rerank: false,      // Desative para ganhar velocidade
      rewriteQuery: false, // Desative para ganhar velocidade
      limit: 3            // Poucos resultados, porém relevantes
    });

    // Resposta rápida para o chat
    const context = results.results
      .map(r => r.memory)
      .join('\n\n');
    ```
  </Tab>
  <Tab title="Python">
    ```python
    # Otimizado para respostas de chatbot
    results = client.search.memories(
        q=user_message,
        container_tag=user_id,
        threshold=0.6,     # Relevância equilibrada
        rerank=False,      # Desative para ganhar velocidade
        rewrite_query=False, # Desative para ganhar velocidade
        limit=3            # Poucos resultados, porém relevantes
    )

    # Resposta rápida para o chat
    context = '\n\n'.join([r.memory for r in results.results])
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    # Otimizado para respostas de chatbot
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "user question here",
        "containerTag": "user_123",
        "threshold": 0.6,
        "rerank": false,
        "rewriteQuery": false,
        "limit": 3
      }'
    ```
  </Tab>
</Tabs>

<div id="complete-memories-search-example">
  ## Exemplo completo de busca em Memórias
</div>

Combinando recursos para resultados mais abrangentes:

<Tabs>
  <Tab title="TypeScript">
    ```typescript
    const results = await client.search.memories({
      q: "machine learning model performance",
      containerTag: "research_team",
      filters: {
        AND: [
          { key: "topic", value: "ai", negate: false }
        ]
      },
      threshold: 0.7,
      rerank: true,
      rewriteQuery: false, // Pular para ganhar velocidade
      include: {
        documents: true,
        relatedMemories: false,
        summaries: true
      },
      limit: 5
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    results = client.search.memories(
        q="machine learning model performance",
        container_tag="research_team",
        filters={
            "AND": [
                {"key": "topic", "value": "ai", "negate": False}
            ]
        },
        threshold=0.7,
        rerank=True,
        rewrite_query=False,  # Pular para ganhar velocidade
        include={
            "documents": True,
            "relatedMemories": False,
            "summaries": True
        },
        limit=5
    )
    ```
  </Tab>
  <Tab title="cURL">
    ```bash
    curl -X POST "https://api.supermemory.ai/v4/search" \
      -H "Authorization: Bearer $SUPERMEMORY_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "q": "machine learning model performance",
        "containerTag": "research_team",
        "filters": {
          "AND": [
            {"key": "topic", "value": "ai", "negate": false}
          ]
        },
        "threshold": 0.7,
        "rerank": true,
        "rewriteQuery": false,
        "include": {
          "documents": true,
          "relatedMemories": false,
          "summaries": true
        },
        "limit": 5
      }'
    ```
  </Tab>
</Tabs>

<div id="comon-use-cases">
  ## Casos de uso comuns
</div>

- **Chatbots**: Busca básica com tag de contêiner e limite baixo
- **Sistemas de Q&A**: Ative Reranking para melhorar a relevância
- **Recuperação de conhecimento**: Inclua documents e resumos
- **Busca em tempo real**: Ignore reescrita e Reranking para máxima velocidade