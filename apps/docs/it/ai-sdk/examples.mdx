---
title: "Esempi di AI SDK"
description: "Esempi completi su come usare Supermemory con Vercel AI SDK"
sidebarTitle: "Esempi"
---

Questa pagina presenta esempi completi sull’uso di Supermemory con Vercel AI SDK, coprendo sia l’approccio con i Memory Tools sia quello con Infinite Chat.

<div id="personal-assistant-with-memory-tools">
  ## Assistente personale con Memory Tools
</div>

Crea un assistente AI che ricordi le preferenze dell’utente e le interazioni passate:

<CodeGroup>
  ```typescript Next.js API Route
  import { streamText } from 'ai'
  import { createAnthropic } from '@ai-sdk/anthropic'
  import { supermemoryTools } from '@supermemory/tools/ai-sdk'

  const anthropic = createAnthropic({
    apiKey: process.env.ANTHROPIC_API_KEY!
  })

  export async function POST(request: Request) {
    const { messages } = await request.json()

    const result = await streamText({
      model: anthropic('claude-3-sonnet-20240229'),
      messages,
      tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!),
      system: `You are a helpful personal assistant. When users share information about themselves,
      remember it using the addMemory tool. When they ask questions, search your memories to provide
      personalized responses. Always be proactive about remembering important details.`
    })

    return result.toAIStreamResponse()
  }
  ```

  ```typescript Client Component
  'use client'

  import { useChat } from 'ai/react'

  export default function PersonalAssistant() {
    const { messages, input, handleInputChange, handleSubmit } = useChat()

    return (
      <div className="flex flex-col h-screen max-w-2xl mx-auto p-4">
        <div className="flex-1 overflow-y-auto space-y-4">
          {messages.map((message) => (
            <div
              key={message.id}
              className={`p-4 rounded-lg ${
                message.role === 'user' ? 'bg-blue-100 ml-auto' : 'bg-gray-100'
              }`}
            >
              <p>{message.content}</p>
            </div>
          ))}
        </div>

        <form onSubmit={handleSubmit} className="mt-4">
          <input
            value={input}
            onChange={handleInputChange}
            placeholder="Parlami di te o chiedimi qualsiasi cosa..."
            className="w-full p-2 border rounded"
          />
        </form>
      </div>
    )
  }
  ```
</CodeGroup>

**Esempio di conversazione:**

* Utente: &quot;Sono allergico alle arachidi e adoro la cucina italiana&quot;
* AI: *Usa lo strumento addMemory* &quot;Ho memorizzato che sei allergico alle arachidi e ami la cucina italiana!&quot;
* Utente: &quot;Suggerisci un ristorante per la cena&quot;
* AI: *Usa lo strumento searchMemories* &quot;In base a ciò che so di te, ti consiglierei un ristorante italiano senza arachidi...&quot;

<div id="customer-support-with-context">
  ## Assistenza clienti con contesto
</div>

Crea un sistema di supporto clienti che ricordi la cronologia del cliente:

```typescript
import { streamText } from 'ai'
import { createOpenAI } from '@ai-sdk/openai'
import { supermemoryTools } from '@supermemory/tools/ai-sdk'

const openai = createOpenAI({
  apiKey: process.env.OPENAI_API_KEY!
})

export async function POST(request: Request) {
  const { messages, customerId } = await request.json()

  const result = await streamText({
    model: openai('gpt-5'),
    messages,
    tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
      containerTags: [customerId]
    }),
    system: `Sei un agente di supporto clienti. Prima di rispondere a qualsiasi richiesta:
    1. Cerca le interazioni e i problemi precedenti del cliente
    2. Memorizza qualsiasi nuova informazione condivisa in questa conversazione
    3. Fornisci assistenza personalizzata basata sulla loro cronologia
    4. Sii sempre empatico e orientato alla risoluzione`
  })

  return result.toAIStreamResponse()
}
```

<div id="infinite-chat-for-documentation">
  ## Infinite Chat per la documentazione
</div>

Crea un assistente alla documentazione con contesto illimitato:

<CodeGroup>
  ```typescript Documentation Chat
  import { streamText } from 'ai'

  const supermemoryInfiniteChat = createOpenAI({
    baseUrl: 'https://api.supermemory.ai/v3/https://api.openai.com/v1',
    apiKey: 'your-provider-api-key',
    headers: {
      'x-supermemory-api-key': 'supermemory-api-key',
      'x-sm-conversation-id': 'conversation-id'
    }
  })

  export async function POST(request: Request) {
    const { messages } = await request.json()

    const result = await streamText({
      model: supermemoryInfiniteChat('gpt-5'),
      messages,
      system: `Sei un assistente alla documentazione. Hai accesso a tutte le
      conversazioni precedenti e puoi fare riferimento a discussioni passate. Aiuta gli utenti a comprendere
      la documentazione facendo leva sul contesto precedente.`
    })

    return result.toAIStreamResponse()
  }
  ```

  ```typescript Upload Documentation
  // Endpoint separato per caricare la documentazione nella memory
  import { addMemory } from '@supermemory/tools'

  export async function POST(request: Request) {
    const { content, title, url } = await request.json()

    const memory = await addMemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!,
      content,
      title,
      url,
      headers: {
        'x-sm-conversation-id': 'documentation'
      }
    })

    return Response.json({ success: true, memory })
  }
  ```
</CodeGroup>

<div id="multi-user-learning-assistant">
  ## Assistente di apprendimento multi‑utente
</div>

Crea un assistente che apprende da più utenti ma mantiene i dati separati:

```typescript
import { streamText } from 'ai'
import { createAnthropic } from '@ai-sdk/anthropic'
import { supermemoryTools } from '@supermemory/tools/ai-sdk'

const anthropic = createAnthropic({
  apiKey: process.env.ANTHROPIC_API_KEY!
})

export async function POST(request: Request) {
  const { messages, userId, courseId } = await request.json()

  const result = await streamText({
    model: anthropic('claude-3-haiku-20240307'),
    messages,
    tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
      containerTags: [userId]
    }),
    system: `Sei un assistente per l'apprendimento. Aiuta gli studenti con i loro corsi:
    1. Ricordando i loro progressi di apprendimento e le difficoltà
    2. Cercando informazioni rilevanti dalle loro sessioni precedenti
    3. Fornendo spiegazioni personalizzate basate sul loro stile di apprendimento
    4. Tenendo traccia degli argomenti che hanno padroneggiato rispetto a quelli per cui necessitano di maggiore aiuto`
  })

  return result.toAIStreamResponse()
}
```

<div id="research-assistant-with-file-processing">
  ## Assistente di ricerca con elaborazione file
</div>

Combina il caricamento dei file con gli strumenti di memory per l’assistenza alla ricerca:

<CodeGroup>
  ```typescript API Route
  import { streamText } from 'ai'
  import { createOpenAI } from '@ai-sdk/openai'
  import { supermemoryTools } from '@supermemory/tools/ai-sdk'

  const openai = createOpenAI({
    apiKey: process.env.OPENAI_API_KEY!
  })

  export async function POST(request: Request) {
    const { messages, projectId } = await request.json()

    const result = await streamText({
      model: openai('gpt-5'),
      messages,
      tools: supermemoryTools(process.env.SUPERMEMORY_API_KEY!, {
        containerTags: [projectId]
      }),
      system: `Sei un assistente di ricerca. Puoi:
      1. Cercare tra articoli e documenti caricati
      2. Ricordare risultati chiave e insight dalle conversazioni
      3. Aiutare a sintetizzare informazioni provenienti da più fonti
      4. Tenere traccia dell’avanzamento della ricerca e delle principali scoperte`
    })

    return result.toAIStreamResponse()
  }
  ```

  ```typescript File Upload Handler
  import { addMemory } from '@supermemory/tools'

  export async function POST(request: Request) {
    const formData = await request.formData()
    const file = formData.get('file') as File
    const projectId = formData.get('projectId') as string

    // Carica il file e aggiungilo alla memory
    const memory = await addMemory({
      apiKey: process.env.SUPERMEMORY_API_KEY!,
      content: file, // Supermemory gestisce l’elaborazione dei file
      title: file.name,
      headers: {
        'x-sm-conversation-id': projectId
      }
    })

    return Response.json({
      success: true,
      message: "Documento caricato ed elaborato per la ricerca",
      memoryId: memory.id
    })
  }
  ```
</CodeGroup>

<div id="code-assistant-with-project-memory">
  ## Assistant di codice con memory di progetto
</div>

Crea un assistente di sviluppo che ricorda il tuo codebase e le tue preferenze:

```typescript
import { streamText } from 'ai'
import { createAnthropic } from '@ai-sdk/anthropic'
import {
  supermemoryTools,
  searchMemoriesTool,
  addMemoryTool
} from '@supermemory/tools/ai-sdk'

const anthropic = createAnthropic({
  apiKey: process.env.ANTHROPIC_API_KEY!
})

export async function POST(request: Request) {
  const { messages, repositoryId } = await request.json()

  const result = await streamText({
    model: anthropic('claude-3-sonnet-20240229'),
    messages,
    tools: {
      // Utilizza strumenti individuali per un maggiore controllo
      searchMemories: searchMemoriesTool(process.env.SUPERMEMORY_API_KEY!, {
        headers: {
          'x-sm-conversation-id': `repo-${repositoryId}`
        }
      }),
      addMemory: addMemoryTool(process.env.SUPERMEMORY_API_KEY!, {
        headers: {
          'x-sm-conversation-id': `repo-${repositoryId}`
        }
      }),
      // Aggiungi strumenti personalizzati
      executeCode: {
        description: 'Esegui codice in un ambiente sandbox',
        parameters: z.object({
          code: z.string(),
          language: z.string()
        }),
        execute: async ({ code, language }) => {
          // La tua logica di esecuzione del codice
          return { result: "Codice eseguito con successo" }
        }
      }
    },
    system: `Sei un assistente di programmazione con memoria. Puoi:
    1. Ricordare pattern di codifica e preferenze dalle conversazioni precedenti
    2. Cercare tra esempi di codice e soluzioni precedenti
    3. Tenere traccia dell'architettura del progetto e delle decisioni di design
    4. Imparare dalle sessioni di debug e dai problemi comuni`
  })

  return result.toAIStreamResponse()
}
```

<div id="advanced-custom-tool-integration">
  ## Avanzato: integrazione di strumenti personalizzati
</div>

Combina gli strumenti di Supermemory con i tuoi strumenti personalizzati:

```typescript
import { streamText } from 'ai'
import { createOpenAI } from '@ai-sdk/openai'
import { supermemoryTools } from '@supermemory/tools/ai-sdk'
import { z } from 'zod'

const openai = createOpenAI({
  apiKey: process.env.OPENAI_API_KEY!
})

// Strumento personalizzato per l'integrazione del calendario
const calendarTool = {
  description: 'Crea eventi del calendario',
  parameters: z.object({
    title: z.string(),
    date: z.string(),
    duration: z.number()
  }),
  execute: async ({ title, date, duration }) => {
    // La tua integrazione API del calendario
    return { eventId: "cal_123", message: "Evento creato" }
  }
}

export async function POST(request: Request) {
  const { messages } = await request.json()

  const result = await streamText({
    model: openai('gpt-5'),
    messages,
    tools: {
      // Espandi gli strumenti Supermemory
      ...supermemoryTools(process.env.SUPERMEMORY_API_KEY!),
      // Aggiungi strumenti personalizzati
      createEvent: calendarTool,
    },
    system: `Sei un assistente personale che può ricordare informazioni e
    gestire calendari. Quando gli utenti menzionano eventi o appuntamenti:
    1. Ricorda i dettagli usando addMemory
    2. Crea eventi del calendario usando createEvent
    3. Cerca conflitti usando searchMemories`
  })

  return result.toAIStreamResponse()
}
```

<div id="environment-setup">
  ## Configurazione dell’ambiente
</div>

Per tutti gli esempi, assicurati di avere queste variabili d’ambiente:

```bash .env.local
SUPERMEMORY_API_KEY=your_supermemory_key
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key
```

<div id="best-practices">
  ## Best practice
</div>

<div id="memory-tools">
  ### Memory Tools
</div>

* Usa contenuti di memory descrittivi per ottenere risultati di ricerca migliori
* Includi nei system prompt il contesto su quando utilizzare ciascun tool
* Usa intestazioni di progetto per separare i diversi casi d’uso
* Implementa la gestione degli errori in caso di failure dei tool

<div id="infinite-chat">
  ### Infinite Chat
</div>

* Usa gli ID di conversazione per mantenere contesti di chat separati
* Includi gli ID utente per offrire esperienze personalizzate
* Prova diversi provider per trovare la soluzione migliore per il tuo caso d’uso
* Monitora l’utilizzo dei token per ottimizzare i costi

<div id="general-tips">
  ### Suggerimenti generali
</div>

* Inizia con esempi semplici e aumenta gradualmente la complessità
* Usa la ricerca per evitare memorie salvate duplicate
* Implementa un&#39;autenticazione adeguata per l&#39;ambiente di produzione
* Valuta il rate limiting per applicazioni ad alto traffico

<div id="next-steps">
  ## Prossimi passaggi
</div>

<CardGroup cols={2}>
  <Card title="Memory API" icon="database" href="/it/memory-api/overview">
    Gestione avanzata delle memory con controllo completo tramite API
  </Card>

  <Card title="Memory Router" icon="route" href="/it/memory-router/overview">
    Proxy drop-in per applicazioni LLM esistenti
  </Card>
</CardGroup>